cmake_minimum_required(VERSION 3.16)

# ===== TOOLCHAIN CONFIGURATION =====
# è®¾ç½®ç›®æ ‡ç³»ç»Ÿ
set(CMAKE_SYSTEM_NAME Generic)
set(CMAKE_SYSTEM_PROCESSOR arm)

# è·³è¿‡ç¼–è¯‘å™¨æµ‹è¯• (è§£å†³äº¤å‰ç¼–è¯‘é—®é¢˜)
set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)

# è®¾ç½®ç¼–è¯‘å™¨
set(CMAKE_C_COMPILER arm-none-eabi-gcc)
set(CMAKE_CXX_COMPILER arm-none-eabi-g++)
set(CMAKE_ASM_COMPILER arm-none-eabi-gcc)
set(CMAKE_OBJCOPY arm-none-eabi-objcopy)
set(CMAKE_SIZE arm-none-eabi-size)
set(CMAKE_NM arm-none-eabi-nm)

# å¤„ç†å™¨ç‰¹å®šè®¾ç½® (FM33LG0xx ä½¿ç”¨ Cortex-M0+ æ ¸å¿ƒ)
set(CPU_FLAGS "-mcpu=cortex-m0plus -mthumb -mfloat-abi=soft")

# åŸºç¡€ç¼–è¯‘å™¨æ ‡å¿—
#set(CMAKE_C_FLAGS_INIT "${CPU_FLAGS} -ffunction-sections -fdata-sections")
#set(CMAKE_CXX_FLAGS_INIT "${CPU_FLAGS} -ffunction-sections -fdata-sections -fno-rtti -fno-exceptions")
#set(CMAKE_ASM_FLAGS_INIT "${CPU_FLAGS}")
set(CMAKE_C_FLAGS "${CPU_FLAGS} -ffunction-sections -fdata-sections")
set(CMAKE_CXX_FLAGS "${CPU_FLAGS} -ffunction-sections -fdata-sections -fno-rtti -fno-exceptions")
set(CMAKE_ASM_FLAGS "${CPU_FLAGS}")

# é“¾æ¥å™¨æ ‡å¿—
set(CMAKE_EXE_LINKER_FLAGS_INIT "${CPU_FLAGS} -specs=nano.specs -specs=nosys.specs -Wl,--gc-sections")
#set(CMAKE_EXE_LINKER_FLAGS_INIT "${CPU_FLAGS} -specs=nano.specs -specs=nosys.specs -Wl,--gc-sections -lgcc -lc -lnosys")
#set(CMAKE_EXE_LINKER_FLAGS_INIT "${CPU_FLAGS} -specs=nano.specs -specs=rdimon.specs -Wl,--gc-sections")

# æœç´¢è·¯å¾„é…ç½®
set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)

# ===== PROJECT DEFINITION =====
project(NB_IOT_Gas_Meter_Board_18
    VERSION 1.1.0
    DESCRIPTION "NB_GAS_METER_TESTER for FM33LG0xx"
    LANGUAGES C CXX ASM
)

# Set executable suffix
set(CMAKE_EXECUTABLE_SUFFIX .elf)

# Build type configuration
if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE Debug CACHE STRING "Build type" FORCE)
endif()

# Compiler feature requirements
set(CMAKE_C_STANDARD 11)
set(CMAKE_C_STANDARD_REQUIRED ON)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# ===== PROJECT DIRECTORIES =====
set(DRIVERS_DIR ${CMAKE_CURRENT_SOURCE_DIR}/Drivers)
set(CMSIS_DIR ${DRIVERS_DIR}/CMSIS/Device)
set(FM33_DIR ${DRIVERS_DIR}/FM33LG0xx_FL_Driver)
set(CONFIG_DIR ${CMAKE_CURRENT_SOURCE_DIR}/MF-config)
set(INC_DIR ${CMAKE_CURRENT_SOURCE_DIR}/Inc)
set(SRC_DIR ${CMAKE_CURRENT_SOURCE_DIR}/Src)

# ===== BOOTLOADER SUPPORT =====
#
# é…ç½®æ–¹å¼ï¼ˆäºŒé€‰ä¸€ï¼‰ï¼š
#   1. ä¿®æ”¹ Inc/app_config.h ä¸­çš„ #define USE_BOOTLOADERï¼ˆæ¨èï¼‰
#   2. CMake å‘½ä»¤è¡Œ: cmake -DUSE_BOOTLOADER=ON ...ï¼ˆå‘½ä»¤è¡Œä¼˜å…ˆçº§æ›´é«˜ï¼‰
#
# ä» app_config.h è¯»å–é…ç½®
file(READ ${INC_DIR}/app_config.h APP_CONFIG_CONTENT)
string(FIND "${APP_CONFIG_CONTENT}" "#define USE_BOOTLOADER" USE_BOOTLOADER_POS)
# æ£€æŸ¥æ˜¯å¦è¢«æ³¨é‡Šï¼ˆæŸ¥æ‰¾ "// #define USE_BOOTLOADER"ï¼‰
string(FIND "${APP_CONFIG_CONTENT}" "// #define USE_BOOTLOADER" USE_BOOTLOADER_COMMENTED_POS)

# å¦‚æœå‘½ä»¤è¡Œæ²¡æœ‰æŒ‡å®šï¼Œåˆ™ä» app_config.h è¯»å–
if(NOT DEFINED USE_BOOTLOADER OR USE_BOOTLOADER STREQUAL "")
    if(USE_BOOTLOADER_POS GREATER -1 AND USE_BOOTLOADER_COMMENTED_POS EQUAL -1)
        set(USE_BOOTLOADER ON)
        message(STATUS "USE_BOOTLOADER detected in app_config.h")
    else()
        set(USE_BOOTLOADER OFF)
    endif()
endif()

# Linker script path - æ ¹æ® USE_BOOTLOADER é€‰é¡¹é€‰æ‹©
if(USE_BOOTLOADER)
    set(LINKER_SCRIPT ${CMSIS_DIR}/FM/FM33xx/Source/Templates/gcc/linker/fm33lg04x_app_with_bootloader.ld)
    message(STATUS "")
    message(STATUS "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    message(STATUS "â•‘  ğŸš€ BOOTLOADER MODE: APP starts at 0x4000 (240KB)      â•‘")
    message(STATUS "â•‘     é…ç½®ä½ç½®: Inc/app_config.h                         â•‘")
    message(STATUS "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    message(STATUS "")
else()
    set(LINKER_SCRIPT ${CMSIS_DIR}/FM/FM33xx/Source/Templates/gcc/linker/fm33lg04x_flash.ld)
    message(STATUS "")
    message(STATUS "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    message(STATUS "â•‘  ğŸ“¦ STANDALONE MODE: APP starts at 0x0000 (256KB)      â•‘")
    message(STATUS "â•‘     é…ç½®ä½ç½®: Inc/app_config.h                         â•‘")
    message(STATUS "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    message(STATUS "")
endif()

if(NOT EXISTS ${LINKER_SCRIPT})
    message(FATAL_ERROR "Linker script not found: ${LINKER_SCRIPT}")
endif()

# ===== FORCE REBUILD MAIN.C FOR TIMESTAMP UPDATE =====
# å¼ºåˆ¶æ¯æ¬¡æ„å»ºæ—¶é‡æ–°ç¼–è¯‘ main.cï¼Œç¡®ä¿ __DATE__ å’Œ __TIME__ å®è‡ªåŠ¨æ›´æ–°
# æ–¹æ³•: åœ¨æ„å»ºå‰ touch main.c ä½¿å…¶æ—¶é—´æˆ³æ›´æ–°
add_custom_target(touch_main_for_timestamp ALL
    COMMAND ${CMAKE_COMMAND} -E touch_nocreate ${SRC_DIR}/main.c
    COMMENT "Touching main.c to update build timestamp (__DATE__ / __TIME__)"
)

# ===== EXECUTABLE CREATION =====
add_executable(${PROJECT_NAME})

# Include directories
target_include_directories(${PROJECT_NAME} PRIVATE
    ${CMSIS_DIR}
    ${CMSIS_DIR}/FM/FM33xx/Include
    ${FM33_DIR}/Inc
    ${INC_DIR}
    ${INC_DIR}/Peripheral/uart
    ${CONFIG_DIR}/Inc
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/ValveCtrl
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/TimeManager
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/LedIndicator
    # Protocol framework includes - ä½¿ç”¨Componentsä½œä¸ºæ ¹ç›®å½•,æ”¯æŒ #include "Protocol/xxx.h"
    ${CMAKE_CURRENT_SOURCE_DIR}/Components
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/PC
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/Device
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/Device/Diomestic/DiaphragmGasMeters
    # Utility includes
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Utility
    # EasyLogger includes
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/EasyLogger
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/EasyLogger/easylogger/inc
    # FlashDB includes
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/inc
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/port/fal/inc
    # Test framework includes - æ”¯æŒ #include "Test/xxx.h"
    ${CMAKE_CURRENT_SOURCE_DIR}/Src
    ${CMAKE_CURRENT_SOURCE_DIR}/Src/Test
    ${CMAKE_CURRENT_SOURCE_DIR}/Src/Test/NB_18_DiaphragmGas_Test
    ${CMAKE_CURRENT_SOURCE_DIR}/Src/Test/Domestic_water_meter_Test
)

# Compile definitions
target_compile_definitions(${PROJECT_NAME} PRIVATE
    DEBUG
    USE_HAL_DRIVER
    FM33LG0XX
    # Bootloader æ¨¡å¼å®å®šä¹‰ï¼Œå¯åœ¨ä»£ç ä¸­ä½¿ç”¨ #ifdef USE_BOOTLOADER åˆ¤æ–­
    $<$<BOOL:${USE_BOOTLOADER}>:USE_BOOTLOADER=1>
    $<$<BOOL:${USE_BOOTLOADER}>:APP_START_ADDRESS=0x4000>
    $<$<CONFIG:Debug>:DEBUG=1>
    $<$<CONFIG:Release>:NDEBUG=1>
)

# Compiler options
target_compile_options(${PROJECT_NAME} PRIVATE
    # Common options
    -Wall
    -Wextra
    # -Wpedantic                    # ç¦ç”¨ï¼šä¸ GCC æ‰©å±•ï¼ˆå¦‚ __FUNCTION__ï¼‰å†²çª
    -Wno-unused-parameter           # å±è”½"unused parameter"è­¦å‘Š
    -Wno-unused-but-set-variable    # å±è”½"unused but set variable"è­¦å‘Š
    -Wno-unused-variable            # å±è”½"unused variable"è­¦å‘Š

    # Debug/Release specific
    $<$<CONFIG:Debug>:-Og -g3>
    $<$<CONFIG:Release>:-O2 -DNDEBUG>

    # C specific options
    $<$<COMPILE_LANGUAGE:C>:-std=gnu11>

    # C++ specific options
    $<$<COMPILE_LANGUAGE:CXX>:-std=gnu++17>
)

# Linker options
target_link_options(${PROJECT_NAME} PRIVATE
    -T${LINKER_SCRIPT}
    -Wl,--print-memory-usage
    -Wl,-Map=${PROJECT_NAME}.map
    -Wl,--cref
    -Wl,--check-sections
    -Wl,--unresolved-symbols=report-all
    -Wl,--warn-common
)

# ===== SOURCE FILES =====
# CMSIS and System sources
set(CMSIS_SOURCES
    ${CMSIS_DIR}/FM/FM33xx/Source/Templates/gcc/startup_fm33lg0xx.s
    ${CMSIS_DIR}/FM/FM33xx/Source/system_fm33lg0xx.c
)

# FM33LG0xx Driver sources
file(GLOB FM33_DRIVER_SOURCES
    ${FM33_DIR}/Src/fm33lg0xx_fl*.c
)

# Application sources - Auto-scan all .c files
# Application source files (automatically find all .c files)
# æ³¨æ„: åªåŒ…å«éœ€è¦çš„ç›®å½•ï¼Œä¸ä½¿ç”¨é€’å½’æœç´¢ Components æ ¹ç›®å½•
file(GLOB APP_SOURCES_AUTO
    ${SRC_DIR}/*.c
    ${SRC_DIR}/Peripheral/uart/*.c
    ${SRC_DIR}/Test/*.c
    ${SRC_DIR}/Test/NB_18_DiaphragmGas_Test/*.c
    ${SRC_DIR}/Test/Domestic_water_meter_Test/*.c
    ${CONFIG_DIR}/Src/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/ValveCtrl/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/TimeManager/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/LedIndicator/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/PC/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/PC/Domestic/WaterMeters/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/PC/Domestic/DiaphragmGasMeters/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/Device/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/Device/Diomestic/DiaphragmGasMeters/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/Device/Diomestic/WaterMeters/*.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Utility/*.c
)

# EasyLogger sources (only core files, port file is in Src/)
set(EASYLOGGER_SOURCES
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/EasyLogger/easylogger/src/elog.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/EasyLogger/easylogger/src/elog_utils.c
)

# FlashDB sources
set(FLASHDB_SOURCES
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/src/fdb.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/src/fdb_kvdb.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/src/fdb_utils.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/port/fal/src/fal.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/port/fal/src/fal_flash.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/port/fal/src/fal_partition.c
    # FM33LG04x Flash port
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/fal_flash_fm33lg04_port.c
    # Flash diagnostics and test stats
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/flash_diag.c
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/FlashDB/test_stats.c
)

# Exclude certain files if needed (e.g., test files or disabled modules)
set(EXCLUDED_SOURCES
    # PC_xieyi_Ctrl.c å·²ç§»è‡³ Src/backup/ (è¢« Protocol æ¨¡å—æ›¿ä»£)
    ${CMAKE_CURRENT_SOURCE_DIR}/Src/backup/PC_xieyi_Ctrl.c
    # Legacyé€‚é…å±‚ä¸å†éœ€è¦
    ${CMAKE_CURRENT_SOURCE_DIR}/Components/Protocol/PC/pc_protocol_legacy.c
)

# Remove excluded files from the list
list(REMOVE_ITEM APP_SOURCES_AUTO ${EXCLUDED_SOURCES})

# Filter out non-existent files
set(APP_SOURCES)
foreach(source ${APP_SOURCES_AUTO})
    if(EXISTS ${source})
        list(APPEND APP_SOURCES ${source})
    endif()
endforeach()

# Print found source files for debugging
message(STATUS "Found application source files:")
foreach(source ${APP_SOURCES})
    get_filename_component(filename ${source} NAME)
    message(STATUS "  - ${filename}")
endforeach()

# Verify all source files exist
foreach(source ${APP_SOURCES})
    if(NOT EXISTS ${source})
        message(WARNING "Source file not found: ${source}")
    endif()
endforeach()

# Add all sources to target
target_sources(${PROJECT_NAME} PRIVATE
    ${CMSIS_SOURCES}
    ${FM33_DRIVER_SOURCES}
    ${APP_SOURCES}
    ${EASYLOGGER_SOURCES}
    ${FLASHDB_SOURCES}
)

# ===== DRIVER LIBRARY (OPTIONAL) =====
# Create static library for drivers
add_library(fm33_drivers STATIC ${FM33_DRIVER_SOURCES})
target_include_directories(fm33_drivers PUBLIC
    ${CMSIS_DIR}
    ${CMSIS_DIR}/FM/FM33xx/Include
    ${FM33_DIR}/Inc
)
target_compile_definitions(fm33_drivers PUBLIC USE_HAL_DRIVER)
target_compile_options(fm33_drivers PRIVATE
    -Wall -Wextra -ffunction-sections -fdata-sections
    # å±è”½å®˜æ–¹å›ºä»¶åº“çš„å¸¸è§è­¦å‘Š
    -Wno-unused-parameter           # å±è”½"unused parameter"è­¦å‘Š
    -Wno-unused-but-set-variable    # å±è”½"unused but set variable"è­¦å‘Š
    -Wno-unused-variable            # å±è”½"unused variable"è­¦å‘Š
    -Wno-unused-function            # å±è”½"unused function"è­¦å‘Š
    -Wno-missing-prototypes         # å±è”½"missing prototypes"è­¦å‘Š
    -Wno-missing-declarations       # å±è”½"missing declarations"è­¦å‘Š
    -Wno-sign-compare               # å±è”½"sign compare"è­¦å‘Š
    -Wno-type-limits                # å±è”½"type limits"è­¦å‘Š
    -Wno-cast-function-type         # å±è”½"cast function type"è­¦å‘Š
    -Wno-implicit-fallthrough       # å±è”½"implicit fallthrough"è­¦å‘Š
    -Wno-strict-aliasing            # å±è”½"strict aliasing"è­¦å‘Š
    -Wno-maybe-uninitialized       # å±è”½"maybe uninitialized"è­¦å‘Š
    -Wno-array-bounds               # å±è”½"array bounds"è­¦å‘Š
    -Wno-format                     # å±è”½"format"è­¦å‘Š
    -Wno-format-truncation          # å±è”½"format truncation"è­¦å‘Š
    -Wno-format-overflow            # å±è”½"format overflow"è­¦å‘Š
    -Wno-stringop-truncation        # å±è”½"stringop truncation"è­¦å‘Š
    -Wno-stringop-overflow          # å±è”½"stringop overflow"è­¦å‘Š
    -Wno-switch-default             # å±è”½"switch default"è­¦å‘Š
    -Wno-switch-enum                # å±è”½"switch enum"è­¦å‘Š
    -Wno-uninitialized              # å±è”½"uninitialized"è­¦å‘Š
    -Wno-aggressive-loop-optimizations  # å±è”½"aggressive loop optimizations"è­¦å‘Š
    $<$<CONFIG:Debug>:-Og -g3>
    $<$<CONFIG:Release>:-O2>
)

# Link the driver library
target_link_libraries(${PROJECT_NAME} PRIVATE fm33_drivers)

# Ensure main.c is touched before compiling (for timestamp update)
add_dependencies(${PROJECT_NAME} touch_main_for_timestamp)

# ===== POST-BUILD COMMANDS =====
add_custom_command(TARGET ${PROJECT_NAME} POST_BUILD
    COMMAND ${CMAKE_OBJCOPY} -O ihex $<TARGET_FILE:${PROJECT_NAME}> ${PROJECT_NAME}.hex
    COMMAND ${CMAKE_OBJCOPY} -O binary $<TARGET_FILE:${PROJECT_NAME}> ${PROJECT_NAME}.bin
    COMMAND ${CMAKE_SIZE} $<TARGET_FILE:${PROJECT_NAME}>
    COMMENT "Generating HEX and BIN files, printing size information"
    VERBATIM
)

# ===== CUSTOM TARGETS =====
# Flash target
add_custom_target(flash
    COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/flash.sh ${CMAKE_CURRENT_BINARY_DIR}/${PROJECT_NAME}.hex
    DEPENDS ${PROJECT_NAME}
    COMMENT "Flashing ${PROJECT_NAME} to target device"
    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
)

# Memory usage analysis
add_custom_target(memory_usage
    COMMAND ${CMAKE_NM} --print-size --size-sort --radix=d $<TARGET_FILE:${PROJECT_NAME}> > ${PROJECT_NAME}_memory.txt
    COMMAND echo "Memory usage analysis saved to ${PROJECT_NAME}_memory.txt"
    DEPENDS ${PROJECT_NAME}
    COMMENT "Analyzing memory usage"
)

# Clean all generated files
add_custom_target(clean_all
    COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_CURRENT_BINARY_DIR}
    COMMAND ${CMAKE_COMMAND} -E make_directory ${CMAKE_CURRENT_BINARY_DIR}
    COMMENT "Cleaning all build files"
)

# ===== INSTALLATION RULES =====
install(TARGETS ${PROJECT_NAME}
    RUNTIME DESTINATION bin
)

install(FILES
    ${CMAKE_CURRENT_BINARY_DIR}/${PROJECT_NAME}.hex
    ${CMAKE_CURRENT_BINARY_DIR}/${PROJECT_NAME}.bin
    ${CMAKE_CURRENT_BINARY_DIR}/${PROJECT_NAME}.map
    DESTINATION bin
    OPTIONAL
)

# ===== CONFIGURATION SUMMARY =====
message(STATUS "=== Build Configuration ===")
message(STATUS "Project: ${PROJECT_NAME}")
message(STATUS "Version: ${PROJECT_VERSION}")
message(STATUS "Build type: ${CMAKE_BUILD_TYPE}")
message(STATUS "Processor: ${CMAKE_SYSTEM_PROCESSOR}")
message(STATUS "C Compiler: ${CMAKE_C_COMPILER}")
message(STATUS "CXX Compiler: ${CMAKE_CXX_COMPILER}")
message(STATUS "Linker script: ${LINKER_SCRIPT}")
message(STATUS "Source files found: ${CMAKE_CURRENT_SOURCE_DIR}")
message(STATUS "Build directory: ${CMAKE_CURRENT_BINARY_DIR}")
message(STATUS "===============================")
